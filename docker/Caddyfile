# Access via: https://mumsmums.app
# Caddy automatically handles HTTPS certificates via Let's Encrypt

mumsmums.app {
    # Enable gzip compression
    encode gzip

    # GraphQL API endpoint - proxy to backend
    handle /graphql* {
        reverse_proxy backend:8080
    }

    # Auth API endpoints - proxy to backend
    handle /api/auth/* {
        reverse_proxy backend:8080
    }

    # All other routes - proxy to Next.js frontend
    handle /* {
        reverse_proxy frontend:3000
    }

    # Access logs
    log {
        output stdout
        format console
    }
}
